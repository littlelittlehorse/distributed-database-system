# B+ 树

上节提到，DBMS 使用一些特定的数据结构来存储信息:

- 内部元数据 : 数据库和系统的状态信息。
- 核心数据存储 : 数据库中 tuple 的存储。
- 临时数据结构 : 查询过程中构建的数据。
- 表索引 : 辅助数据结构，找到特定的 tuple。

本节将介绍存储 table index 最常用的树形数据结构：B+ Tree，Skip Lists，Radix Tree。

## 表索引

表索引根据列排序后的结果，建立数据结构，指向相应 tuple 的指针。

存在维护和存储成本:
- 维护成本: 数据的插入、删除、更新，需要同时更新索引结构。
- 存储成本: 索引自身需要占用存储空间。

因此对需要考虑表索引数量。


## B+ 树

B 表示 Blance 平衡，意味着树中叶子的高度差不会超过 1。

B 树和 B+ 树都是多叉平衡树，而不定是二叉平衡树。

B 树和 B+ 树的区别在于，B 树的非叶子和叶子节点都存储关键字，B+ 树只有叶子节点存储关键字。

### MySQL 使用 B+ 树而非 B 树的原因

1. I/O 次数少: B+ 树只有叶子节点存储关键字，非叶子节点不存储指向关键字 tuple 的指针，因此相比于 B 树，B+ 树非叶子节点可以存储更多关键字，减少了 I/O 次数。
2. 查询效率稳定: B+ 树每次都需要找到叶子节点才能返回。
3. 便于范围查找: B+ 树叶子节点使用链表相连，遍历链表便可以完成范围查询。B 树范围查询需要使用对 B 树进行中序遍历。



